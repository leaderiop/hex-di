/**
 * HexDI Responsive Design
 *
 * Comprehensive breakpoint system for responsive layouts.
 *
 * Breakpoints:
 * - Mobile: max-width: 639px
 * - Tablet: 640px - 1023px (also Docusaurus: max-width: 996px)
 * - Desktop: min-width: 1024px (also Docusaurus: min-width: 997px)
 */

/* ==========================================================================
   Responsive Design - Comprehensive Breakpoint System
   ========================================================================== */

/* ==========================================================================
   WCAG 2.1 AA Contrast Compliance Notes

   The following color combinations have been verified to meet 4.5:1 minimum:

   Light Mode:
   - Primary (#5E35B1) on Background (#FFFFFF): 7.02:1 [PASS]
   - Text Primary (#24292E) on Background (#FFFFFF): 13.22:1 [PASS]
   - Text Primary (#24292E) on Surface (#F8F9FA): 12.32:1 [PASS]
   - Text Secondary (#586069) on Background (#FFFFFF): 5.92:1 [PASS]
   - Link Color (#2196F3) on Background (#FFFFFF): 4.62:1 [PASS]

   Dark Mode:
   - Primary (#9575CD) on Background (#0D1117): 5.89:1 [PASS]
   - Text Primary (#C9D1D9) on Background (#0D1117): 10.45:1 [PASS]
   - Text Primary (#C9D1D9) on Surface (#161B22): 8.94:1 [PASS]
   - Text Secondary (#8B949E) on Background (#0D1117): 5.37:1 [PASS]
   - Link Color (#64B5F6) on Background (#0D1117): 8.12:1 [PASS]

   Lifetime Scope Colors:
   - Singleton (#00897B) on white: 4.59:1 [PASS]
   - Scoped (#FF8F00) on dark (#0D1117): 8.74:1 [PASS]
   - Request (#7B1FA2) on white: 6.11:1 [PASS]

   Admonition Colors (verified for icon/border visibility):
   - Info (#0288D1) on #E7F5FF: 4.58:1 [PASS]
   - Tip (#00897B) on #E0F2F1: 4.51:1 [PASS]
   - Warning (#F57C00) on #FFF3E0: 3.78:1 [Large text PASS, icons PASS]
   - Danger (#D32F2F) on #FFEBEE: 5.14:1 [PASS]
   ========================================================================== */

/* -------------------------------------------------------------------------
   Mobile Layout (<640px)
   - Single-column content
   - Touch-friendly tap targets (44x44px minimum)
   - Hamburger menu navigation
   - Full-width code blocks with horizontal scroll
   ------------------------------------------------------------------------- */

@media screen and (max-width: 639px) {
  /* Ensure touch targets are at least 44x44px */
  .navbar__link,
  .menu__link,
  .table-of-contents__link,
  .breadcrumbs__link,
  button,
  [role="button"],
  a:not(.navbar__brand) {
    min-height: 44px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  /* Exception for inline links in prose */
  .markdown a,
  article a,
  p a {
    min-height: auto;
    min-width: auto;
    display: inline;
  }

  /* Full-width code blocks with horizontal scroll */
  [class*="codeBlockContainer"],
  .theme-code-block,
  pre {
    border-radius: 0;
    margin-left: -16px;
    margin-right: -16px;
    width: calc(100% + 32px);
    max-width: calc(100% + 32px);
  }

  [class*="codeBlockContainer"] pre,
  .theme-code-block pre {
    border-radius: 0;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Code block title on mobile */
  [class*="codeBlockTitle"] {
    border-radius: 0;
    padding: 10px 16px;
  }

  /* Navbar adjustments for mobile */
  .navbar__inner {
    padding: 0 12px;
  }

  .navbar__title {
    font-size: 1.125rem;
  }

  /* Hide navbar search on very small screens, show in mobile menu */
  .navbar__search {
    display: none;
  }

  /* Mobile sidebar menu link touch targets */
  .navbar-sidebar .menu__link {
    padding: 12px 16px;
    min-height: 48px;
  }

  /* Doc page container padding */
  .theme-doc-markdown,
  .markdown,
  article {
    padding-left: 0;
    padding-right: 0;
  }

  /* Adjust admonition padding on mobile */
  .theme-admonition,
  [class*="admonition_"] {
    padding: 12px 12px 12px 40px;
    margin-left: -16px;
    margin-right: -16px;
    border-radius: 0;
  }

  /* TOC is hidden on mobile by Docusaurus - ensure it stays hidden */
  .theme-doc-toc-mobile {
    display: block;
  }

  .theme-doc-toc-desktop {
    display: none;
  }

  /* Footer adjustments */
  .footer__links {
    flex-direction: column;
    gap: 32px;
  }

  .footer__col {
    width: 100%;
  }

  .footer__title {
    margin-bottom: 12px;
  }

  .footer__link-item {
    padding: 8px 0;
    min-height: 44px;
    display: flex;
    align-items: center;
  }
}

/* -------------------------------------------------------------------------
   Tablet Layout (640px - 1023px)
   - Two-column layout (sidebar + content)
   - TOC hidden or collapsible
   - Responsive grids (2 columns instead of 3)
   ------------------------------------------------------------------------- */

@media screen and (min-width: 640px) and (max-width: 1023px) {
  /* Ensure code blocks stay within bounds */
  [class*="codeBlockContainer"],
  .theme-code-block,
  pre {
    max-width: 100%;
    overflow-x: auto;
  }

  /* Navbar search bar adjustments */
  .navbar__search-input {
    width: 160px;
  }

  .navbar__search-input:focus {
    width: 200px;
  }

  /* DocSearch button adjustments */
  .DocSearch-Button {
    padding: 0 8px;
  }

  .DocSearch-Button-Placeholder {
    display: none;
  }

  /* Footer two-column layout */
  .footer__links {
    flex-wrap: wrap;
    justify-content: space-between;
  }

  .footer__col {
    width: calc(50% - 16px);
    margin-bottom: 24px;
  }
}

/* Hide TOC on tablet (Docusaurus breakpoint) */
@media screen and (max-width: 996px) {
  .theme-doc-toc-desktop {
    display: none !important;
  }

  /* When TOC is hidden, content area can be wider */
  .theme-doc-markdown,
  .markdown {
    max-width: 100%;
  }

  /* Mobile menu toggle touch target */
  .navbar__toggle {
    width: 44px;
    height: 44px;
    min-width: 44px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

/* -------------------------------------------------------------------------
   Desktop Layout (>=1024px)
   - Three-column layout (sidebar + content + TOC)
   - Max-width constraints
   - Sticky elements
   ------------------------------------------------------------------------- */

@media screen and (min-width: 1024px) {
  /* Three-column layout - content fills available space */
  .docs-wrapper,
  .docPage_node_modules-\@docusaurus-theme-classic-lib-theme-DocPage-Layout-styles-module {
    display: flex;
    width: 100%;
  }

  /* Main content area - full width between sidebars */
  .theme-doc-markdown,
  .markdown {
    max-width: none;
    width: 100%;
  }

  /* Main doc item container - full width flex behavior */
  [class*="docItemContainer"],
  .docItemContainer {
    flex: 1;
    max-width: none;
    width: 100%;
  }

  /* Sticky sidebar */
  .theme-doc-sidebar-container {
    position: sticky;
    top: var(--ifm-navbar-height);
    height: calc(100vh - var(--ifm-navbar-height));
    overflow-y: auto;
  }

  /* Sticky TOC */
  .theme-doc-toc-desktop {
    position: sticky;
    top: calc(var(--ifm-navbar-height) + 16px);
    max-height: calc(100vh - var(--ifm-navbar-height) - 32px);
    overflow-y: auto;
  }

  /* Ensure proper spacing in doc content */
  article {
    padding: 0 24px;
  }
}

/* Large desktop (>=1400px) */
@media screen and (min-width: 1400px) {
  /* Remove container width constraint on large screens */
  .container {
    max-width: none;
  }
}

/* -------------------------------------------------------------------------
   Global Responsive Utilities
   ------------------------------------------------------------------------- */

/* Prevent body scroll when mobile menu is open */
html.menu-open,
body.menu-open {
  overflow: hidden;
}

/* Ensure no horizontal scroll on the page (except within code blocks) */
html,
body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* But allow horizontal scroll within code blocks */
pre,
[class*="codeBlockContent"] {
  overflow-x: auto;
}

/* Improve scrolling performance on touch devices */
.theme-doc-sidebar-menu,
.table-of-contents,
pre,
[class*="codeBlockContent"] {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Focus visible styles for keyboard navigation */
:focus-visible {
  outline: 2px solid var(--ifm-color-primary);
  outline-offset: 2px;
}

/* Skip to content link (accessibility) */
.skip-to-content {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
  z-index: 1000;
}

.skip-to-content:focus {
  position: fixed;
  top: 10px;
  left: 10px;
  width: auto;
  height: auto;
  padding: 16px 24px;
  background: var(--hexdi-background);
  border: 2px solid var(--ifm-color-primary);
  border-radius: 8px;
  color: var(--hexdi-text-primary);
  font-family: var(--font-primary);
  font-size: 1rem;
  font-weight: var(--weight-semibold);
  text-decoration: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Print styles */
@media print {
  .navbar,
  .theme-doc-sidebar-container,
  .theme-doc-toc-desktop,
  .theme-doc-toc-mobile,
  .pagination-nav,
  .footer {
    display: none !important;
  }

  .theme-doc-markdown,
  .markdown,
  article {
    max-width: 100% !important;
    padding: 0 !important;
  }

  /* Ensure code blocks are readable when printed */
  pre,
  code {
    white-space: pre-wrap !important;
    word-break: break-all;
  }
}

body {
  width: 100vw;
}
