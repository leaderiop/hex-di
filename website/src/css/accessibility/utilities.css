/**
 * HexDI Accessibility Utilities
 *
 * Screen reader utilities, color contrast enhancements,
 * keyboard trap prevention, link distinguishability,
 * form label association, and touch target sizing.
 */

/* ==========================================================================
   Accessibility Utilities
   ========================================================================== */

/* -------------------------------------------------------------------------
   Screen Reader Only Content
   Visually hidden but accessible to assistive technology
   ------------------------------------------------------------------------- */

.sr-only,
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Allow the element to be focusable when navigated to via keyboard */
.sr-only:focus,
.sr-only:active,
.visually-hidden:focus,
.visually-hidden:active {
  position: static;
  width: auto;
  height: auto;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* -------------------------------------------------------------------------
   Color Contrast Enhancements for Accessibility
   ------------------------------------------------------------------------- */

/* Ensure error highlight icon meets contrast requirements */
.errorIcon {
  background: var(--hexdi-error-500);
  color: white;
}

[data-theme='dark'] .errorIcon {
  background: var(--hexdi-error-500);
  color: white;
}

/* Ensure warning admonition meets minimum contrast for icons */
.theme-admonition-caution [class*="admonitionHeading"],
.theme-admonition-warning [class*="admonitionHeading"] {
  color: #c46200; /* Darker orange for better contrast on light backgrounds */
}

[data-theme='dark'] .theme-admonition-caution [class*="admonitionHeading"],
[data-theme='dark'] .theme-admonition-warning [class*="admonitionHeading"] {
  color: var(--hexdi-warning-300); /* FFB74D - meets contrast on dark */
}

/* -------------------------------------------------------------------------
   Keyboard Trap Prevention
   Ensure no keyboard traps exist in interactive elements
   ------------------------------------------------------------------------- */

/* Ensure modals can be closed with Escape key (handled by JS) */
/* Ensure focus stays within modal when open */
[aria-modal="true"] {
  /* Styles for modal focus management */
}

/* Ensure dropdown menus are keyboard accessible */
.dropdown__menu {
  /* Focus should cycle through all menu items */
}

/* -------------------------------------------------------------------------
   Link Distinguishability
   Ensure links are distinguishable from surrounding text
   ------------------------------------------------------------------------- */

/* Links in content should be underlined or have other visual distinction */
.markdown a,
article a,
.theme-doc-markdown a {
  text-decoration: underline;
  text-underline-offset: 2px;
}

.markdown a:hover,
article a:hover,
.theme-doc-markdown a:hover {
  text-decoration-thickness: 2px;
}

/* Exception for navigation links (they have other visual cues) */
.navbar a,
.footer a,
.menu a,
.breadcrumbs a,
.pagination-nav a {
  text-decoration: none;
}

.navbar a:hover,
.footer a:hover,
.menu a:hover {
  text-decoration: underline;
}

/* -------------------------------------------------------------------------
   Form Label Association
   Ensure all form inputs have associated labels
   ------------------------------------------------------------------------- */

/* Search input should have associated label via aria-label */
.navbar__search-input,
.DocSearch-Input {
  /* aria-label should be present in HTML */
}

/* -------------------------------------------------------------------------
   Touch Target Size
   Ensure interactive elements meet minimum 44x44px touch target
   ------------------------------------------------------------------------- */

@media (pointer: coarse) {
  /* Buttons and interactive elements */
  button,
  [role="button"],
  a,
  input[type="button"],
  input[type="submit"],
  input[type="reset"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Exception for inline links in prose */
  .markdown a,
  article a,
  p a {
    min-height: auto;
    min-width: auto;
  }
}
